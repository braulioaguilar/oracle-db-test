ALTER SESSION SET CONTAINER = FREEPDB1;
CREATE USER TEST IDENTIFIED BY test123 QUOTA UNLIMITED ON USERS;
GRANT CONNECT, RESOURCE TO TEST;
GRANT CHANGE NOTIFICATION TO TEST;

BEGIN
   EXECUTE IMMEDIATE '
   CREATE TABLE TEST.EVENTS (
    EVENT_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    EVENT_NAME VARCHAR2(100) NOT NULL,
    EVENT_STATUS NUMERIC NOT NULL
   )';
EXCEPTION
   WHEN OTHERS THEN
       IF SQLCODE != -955 THEN RAISE;
       END IF;
END;
/

-- sqlplus TEST/test123@//localhost/FREEPDB1
-- SELECT SYS_CONTEXT('USERENV', 'CURRENT_SCHEMA') FROM dual;
-- SELECT table_name, owner FROM all_tables WHERE table_name = 'EVENTS';


-- INSERT INTO TEST.EVENTS (EVENT_NAME, EVENT_STATUS) VALUES ('Event 1', 1);
-- INSERT INTO TEST.EVENTS (EVENT_NAME, EVENT_STATUS) VALUES ('Event 2', 1);

GRANT SELECT, INSERT, UPDATE, DELETE ON TEST.EVENTS TO TEST;

